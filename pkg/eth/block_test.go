package eth_test

import (
	"encoding/json"
	"github.com/INFURA/eth/pkg/eth"
	"github.com/stretchr/testify/require"
	"testing"
)

func RequireEqualJSON(t *testing.T, expected, actual []byte, msgAndArgs ...interface{}) {
	var exp interface{}
	var act interface{}

	var err error
	err = json.Unmarshal([]byte(expected), &exp)
	require.NoError(t, err, msgAndArgs...)
	err = json.Unmarshal([]byte(actual), &act)
	require.NoError(t, err, msgAndArgs...)
	require.Equal(t, exp, act, msgAndArgs...)
}

func TestMainnetGethBlocks(t *testing.T) {

	partial := `{
    "difficulty": "0xbfabcdbd93dda",
    "extraData": "0x737061726b706f6f6c2d636e2d6e6f64652d3132",
    "gasLimit": "0x79f39e",
    "gasUsed": "0x79ccd3",
    "hash": "0xb3b20624f8f0f86eb50dd04688409e5cea4bd02d700bf6e79e9384d47d6a5a35",
    "logsBloom": "0x4848112002a2020aaa0812180045840210020005281600c80104264300080008000491220144461026015300100000128005018401002090a824a4150015410020140400d808440106689b29d0280b1005200007480ca950b15b010908814e01911000054202a020b05880b914642a0000300003010044044082075290283516be82504082003008c4d8d14462a8800c2990c88002a030140180036c220205201860402001014040180002006860810ec0a1100a14144148408118608200060461821802c081000042d0810104a8004510020211c088200420822a082040e10104c00d010064004c122692020c408a1aa2348020445403814002c800888208b1",
    "miner": "0x5a0b54d5dc17e0aadc383d2db43b0a0d3e029c4c",
    "mixHash": "0x3d1fdd16f15aeab72e7db1013b9f034ee33641d92f71c0736beab4e67d34c7a7",
    "nonce": "0x4db7a1c01d8a8072",
    "number": "0x5bad55",
    "parentHash": "0x61a8ad530a8a43e3583f8ec163f773ad370329b2375d66433eb82f005e1d6202",
    "receiptsRoot": "0x5eced534b3d84d3d732ddbc714f5fd51d98a941b28182b6efe6df3a0fe90004b",
    "sha3Uncles": "0x8a562e7634774d3e3a36698ac4915e37fc84a2cd0044cb84fa5d80263d2af4f6",
    "size": "0x41c7",
    "stateRoot": "0xf5208fffa2ba5a3f3a2f64ebd5ca3d098978bedd75f335f56b705d8715ee2305",
    "timestamp": "0x5b541449",
    "totalDifficulty": "0x12ac11391a2f3872fcd",
    "transactions": [
      "0x8784d99762bccd03b2086eabccee0d77f14d05463281e121a62abfebcf0d2d5f",
      "0x311be6a9b58748717ac0f70eb801d29973661aaf1365960d159e4ec4f4aa2d7f",
      "0xe42b0256058b7cad8a14b136a0364acda0b4c36f5b02dea7e69bfd82cef252a2"
    ],
    "transactionsRoot": "0xf98631e290e88f58a46b7032f025969039aa9b5696498efc76baf436fa69b262",
    "uncles": [
      "0x824cce7c7c2ec6874b9fa9a9a898eb5f27cbaf3991dfa81084c3af60d1db618c"
    ]
  }`

	var block eth.Block

	err := json.Unmarshal([]byte(partial), &block)
	require.NoError(t, err, "mainnet partial block should deserialize")

	require.Equal(t, 3, len(block.Transactions))
	require.Equal(t, "0x5bad55", block.Number.String())
	require.Equal(t, uint64(0x79f39e), block.GasLimit.UInt64())

	full := `{
    "difficulty": "0x742a575f662",
    "extraData": "0xd783010302844765746887676f312e352e31856c696e7578",
    "gasLimit": "0x2fefd8",
    "gasUsed": "0x5208",
    "hash": "0x648509915efa19b169ccab758492c7525b8498747678b894befd9ff78ad05519",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "miner": "0x2a65aca4d5fc5b5c859090a6c34d164135398226",
    "mixHash": "0x47e7eab7d034cf4b8b1501ebfc98edf715ee62f56283bf1a22a5423990600dff",
    "nonce": "0xeacef1c5a2ca3a49",
    "number": "0x99999",
    "parentHash": "0xffa241fbb914038a429c90daeeb54885f31e431d05b12fe87de8007853a1f278",
    "receiptsRoot": "0xb46f767bd3f69c0d7830eae6717f77560ee2ace0ea701d9e95fd41eb39a619ab",
    "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
    "size": "0x290",
    "stateRoot": "0x93e74cf453c3327075b7e252deeb2d115cf2fdb204ba89806cebbd32afdedaa8",
    "timestamp": "0x565eafba",
    "totalDifficulty": "0x336f973a0249a1e9",
    "transactions": [
      {
        "blockHash": "0x648509915efa19b169ccab758492c7525b8498747678b894befd9ff78ad05519",
        "blockNumber": "0x99999",
        "from": "0x4bb96091ee9d802ed039c4d1a5f6216f90f81b01",
        "gas": "0xa028",
        "gasPrice": "0xba43b7400",
        "hash": "0xb4c724bf1f01a5371c513389d5758d531b729f15c8c6af8f74a100585d2cf33f",
        "input": "0x",
        "nonce": "0x461e",
        "r": "0xd5ee485b95d5992a4ca7d210ff28d540aea3f4031ce39203298ae266bcdb3485",
        "s": "0x71ecb17bdbbae8c57681649a95e8c7e22b90adac2e19c314de3b74ecfb5f8ce1",
        "to": "0x86d3856ad0105b9d4199936c1fd203664ba325dc",
        "transactionIndex": "0x0",
        "v": "0x1b",
        "value": "0x44b1eec6162f0000"
      }
    ],
    "transactionsRoot": "0x237e46a0a93850f7979546c717ffccce6715a6b2cb0bdb0d59a9c559a0d74f07",
    "uncles": []
  }`

	err = json.Unmarshal([]byte(full), &block)
	require.NoError(t, err, "mainnet full block should deserialize")

	require.Equal(t, 1, len(block.Transactions))
	require.Equal(t, "0x99999", block.Number.String())
	require.Equal(t, block.Hash, block.Transactions[0].BlockHash)
	require.Equal(t, eth.Data("0xd783010302844765746887676f312e352e31856c696e7578"), block.ExtraData)
	require.Equal(t, true, block.Transactions[0].Populated)
	require.Equal(t, int64(0), block.Transactions[0].Index.Int64())
	require.Equal(t, eth.Data("0x"), block.Transactions[0].Input)

	j, err := json.Marshal(&block)
	require.NoError(t, err)

	RequireEqualJSON(t, []byte(full), j)
}

func TestMainnetParityBlocks(t *testing.T) {
	full := `{
    "author": "0x2a65aca4d5fc5b5c859090a6c34d164135398226",
    "difficulty": "0x742a575f662",
    "extraData": "0xd783010302844765746887676f312e352e31856c696e7578",
    "gasLimit": "0x2fefd8",
    "gasUsed": "0x5208",
    "hash": "0x648509915efa19b169ccab758492c7525b8498747678b894befd9ff78ad05519",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "miner": "0x2a65aca4d5fc5b5c859090a6c34d164135398226",
    "mixHash": "0x47e7eab7d034cf4b8b1501ebfc98edf715ee62f56283bf1a22a5423990600dff",
    "nonce": "0xeacef1c5a2ca3a49",
    "number": "0x99999",
    "parentHash": "0xffa241fbb914038a429c90daeeb54885f31e431d05b12fe87de8007853a1f278",
    "receiptsRoot": "0xb46f767bd3f69c0d7830eae6717f77560ee2ace0ea701d9e95fd41eb39a619ab",
    "sealFields": [
      "0xa047e7eab7d034cf4b8b1501ebfc98edf715ee62f56283bf1a22a5423990600dff",
      "0x88eacef1c5a2ca3a49"
    ],
    "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
    "size": "0x290",
    "stateRoot": "0x93e74cf453c3327075b7e252deeb2d115cf2fdb204ba89806cebbd32afdedaa8",
    "timestamp": "0x565eafba",
    "totalDifficulty": "0x336f973a0249a1e9",
    "transactions": [
      {
        "blockHash": "0x648509915efa19b169ccab758492c7525b8498747678b894befd9ff78ad05519",
        "blockNumber": "0x99999",
        "chainId": null,
        "condition": null,
        "creates": null,
        "from": "0x4bb96091ee9d802ed039c4d1a5f6216f90f81b01",
        "gas": "0xa028",
        "gasPrice": "0xba43b7400",
        "hash": "0xb4c724bf1f01a5371c513389d5758d531b729f15c8c6af8f74a100585d2cf33f",
        "input": "0x",
        "nonce": "0x461e",
        "publicKey": "0xa9177f27b99a4ad938359d77e0dca4b64e7ce3722c835d8087d4eecb27c8a54d59e2917e6b31ec12e44b1064d102d35815f9707af9571f15e92d1b6fbcd207e9",
        "r": "0xd5ee485b95d5992a4ca7d210ff28d540aea3f4031ce39203298ae266bcdb3485",
        "raw": "0xf86e82461e850ba43b740082a0289486d3856ad0105b9d4199936c1fd203664ba325dc8844b1eec6162f0000801ba0d5ee485b95d5992a4ca7d210ff28d540aea3f4031ce39203298ae266bcdb3485a071ecb17bdbbae8c57681649a95e8c7e22b90adac2e19c314de3b74ecfb5f8ce1",
        "s": "0x71ecb17bdbbae8c57681649a95e8c7e22b90adac2e19c314de3b74ecfb5f8ce1",
        "standardV": "0x0",
        "to": "0x86d3856ad0105b9d4199936c1fd203664ba325dc",
        "transactionIndex": "0x0",
        "v": "0x1b",
        "value": "0x44b1eec6162f0000"
      }
    ],
    "transactionsRoot": "0x237e46a0a93850f7979546c717ffccce6715a6b2cb0bdb0d59a9c559a0d74f07",
    "uncles": []
  }`

	var block eth.Block
	err := json.Unmarshal([]byte(full), &block)
	require.NoError(t, err, "mainnet full block should deserialize")

	require.Equal(t, 1, len(block.Transactions))
	require.Equal(t, "0x99999", block.Number.String())
	require.Equal(t, block.Hash, block.Transactions[0].BlockHash)
	require.Equal(t, eth.Data("0xd783010302844765746887676f312e352e31856c696e7578"), block.ExtraData)
	require.Equal(t, true, block.Transactions[0].Populated)
	require.Equal(t, int64(0), block.Transactions[0].Index.Int64())
	require.Equal(t, eth.Data("0x"), block.Transactions[0].Input)

	j, err := json.Marshal(&block)
	require.NoError(t, err)

	RequireEqualJSON(t, []byte(full), j)
}

func TestRinkebyGethBlocks(t *testing.T) {
	partial := `{
  "difficulty": "0x2",
  "extraData": "0xd883010900846765746888676f312e31312e31856c696e75780000000000000066c9aee037b7614e79d9abfc4422ced94a6ca6310e8f17be4a491ac9aaa1ebbd16e9996ad19244964781f806580459829876ab49382e8c1ed37444f17cbaffcc00",
  "gasLimit": "0x6ac95b",
  "gasUsed": "0x2b3ddc",
  "hash": "0x85a52d6d985f5c3221d2df50313950571e4772be23afca8ce410f65d4fbae66a",
  "logsBloom": "0x000c000020080000000000862100000020180008000008080000004921001000001010020014020001000000000200204000000128002000201000001000000004c00088004000810000000800002010000808001000000000000000446000010000000002000800200000000002080000000280080000000000009000000020100010c000008000000084000201000020800001044004000100280000000000020000000040000010000000400000200002000800000000000000000020011000400022000008000010814002040000080000050000200000000000080030000400002000000000820042000002800200082000100081001080080000000080",
  "miner": "0x0000000000000000000000000000000000000000",
  "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "nonce": "0x0000000000000000",
  "number": "0x3ae0c1",
  "parentHash": "0x9b6a1fb3d50c9dd6ffe870d7828220aaede60e18aa0bc418bd3a68e06dda6ff2",
  "receiptsRoot": "0xc21fa0b7d69cc9570308066fed4cb13800d2c0799c292e3365d1824c2460d63e",
  "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
  "size": "0x1c94",
  "stateRoot": "0x480f9a5649b844a69e75c545283cca9443cefaf0365aacd3bb4da4fb5061da97",
  "timestamp": "0x5c634043",
  "totalDifficulty": "0x6cb2df",
  "transactions": [
    "0x9490b0ccdb311bee95336ba35ce13bdbe853968672920d2e855be8467ca04484",
    "0x04871c1493f799184df5bf39f2f25b3eddb59bf91149e54f635859ffb587cdce",
    "0x79e78799b19b27dc9efada94a478728c9045f7dd239fa70f5f2f6e9ec0f53dd9",
    "0x607586f61f92dc3fc792d901a246079b78b7dd006f6e5633701ec7fd530c4e10",
    "0x0e4d4d6963f3ce12224ecdbe2f3018d3ebdda015ec65b1f74b4aea397107478b",
    "0xe5da1d2e03cdaed87fe7aa50f3456b6d230abda06b039f247b1f4d52927df4f8",
    "0xd9f393d9dbb2162db038fd84ba46155e1aa9e397dd62b955375119435aa924fe",
    "0x01a918ea5b384dd45499bd99cc5c08ec52559c3ccc12c2fbf0c1336490c78a35",
    "0xa7c78a933a9f8b9fdb48c11f53a655a7b9b1bbd14140b52b364fcabde1e1aaff",
    "0x5dbba0cd86cc68f7abeaae4dfad6ffc4ed4b4ce3e816129c938dc777c7a54cca",
    "0x20057225e2f70084397c60b34a1ee7840a6ca7d3ad363702f3df5156b3b5e051",
    "0xb037f13701cebde1e0e8e2624a1752f2f8384ca71ffe4cb591c371b715706cb5",
    "0xa6748e4441ed7dcd689c90521f2447749265c11e2be3660370f4cc6fc573ce47",
    "0x6180fbe39d0ca0044c3c4c92a62f5d70aae26afbcc4b9e494ae521b293f62a31",
    "0x7916f314e97f79217ca28eb79c573c185cf0540fe168eae16d8117ffb4e63c4a"
  ],
  "transactionsRoot": "0x8b0849114e5928a281a6a7e1d760db1fd829fe2cfb9bb98eab3fc1e386af2a9a",
  "uncles": []
}`

	var block eth.Block
	err := json.Unmarshal([]byte(partial), &block)
	require.NoError(t, err, "rinkeby partial block should deserialize")

	require.Equal(t, 15, len(block.Transactions))
	require.Equal(t, eth.MustQuantity("0x3ae0c1"), block.Number)
	require.Equal(t, uint64(0x2b3ddc), block.GasUsed.UInt64())

	j, err := json.Marshal(&block)
	require.NoError(t, err)

	RequireEqualJSON(t, []byte(partial), j)
}

func TestKovanParityBlocks(t *testing.T) {
	full := `{
    "author": "0x007733a1fe69cf3f2cf989f81c7b4cac1693387a",
    "difficulty": "0xfffffffffffffffffffffffffffffffe",
    "extraData": "0xde830203028f5061726974792d457468657265756d86312e33312e31826c69",
    "gasLimit": "0x7a1200",
    "gasUsed": "0x2276e2",
    "hash": "0x0c58244f5d538e1f5840c6751c3b3a2c9fdf9583245918b224c6aad088de6e5a",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "miner": "0x007733a1fe69cf3f2cf989f81c7b4cac1693387a",
    "number": "0x9de762",
    "parentHash": "0x7a3cce2e8ad99c92171adc9437d41eddd9e425f33b55b850528b6a9901ef0f9e",
    "receiptsRoot": "0x80add7251de396e7f6dd684e4d1be6823bdb867e96a9586c65a6f6c03659fad0",
    "sealFields": [
      "0x841718d07d",
      "0xb841e3d53556d6af10a059dd0d0d4bad2b10e3389ae08c83318b053cf04fac5c69676e96bee369cb3c11a926bbaeb25aa3ce80a101bd2d9db6f6f014b3ccbbfd7c4e00"
    ],
    "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
    "signature": "e3d53556d6af10a059dd0d0d4bad2b10e3389ae08c83318b053cf04fac5c69676e96bee369cb3c11a926bbaeb25aa3ce80a101bd2d9db6f6f014b3ccbbfd7c4e00",
    "size": "0x2bb9",
    "stateRoot": "0x4d301d25429a2114965ce829e2c8b96b69ab826aca09aafa7fe71428d5545651",
    "step": "387502205",
    "timestamp": "0x5c6341f4",
    "totalDifficulty": "0x9ba45300000000000000000000000484a0394a",
    "transactions": [
      {
        "blockHash": "0x0c58244f5d538e1f5840c6751c3b3a2c9fdf9583245918b224c6aad088de6e5a",
        "blockNumber": "0x9de762",
        "chainId": "0x2a",
        "condition": null,
        "creates": null,
        "from": "0xd22abf44e2e2b3a9da3b84383c894f936925333c",
        "gas": "0x7a1200",
        "gasPrice": "0x3b9aca00",
        "hash": "0xd329c3a8ed5e59d649db90a1ff6c4fb632f2f5b925aedd1baa4d84b6f6b9e2f2",
        "input": "0x1a4813d700000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000009de76000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002097035c1f04f1a223413cbe3132300000000000000000000000000000000000062cb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002f69acd420fb6e6de34ec361ceddd000000000000000000000000000000000000a637000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001",
        "nonce": "0x2501b",
        "publicKey": "0xd1c9ae85381ad59eb19d55a0df58e5c0d3599d3a3766347526fd3902ad98146e89694746668c36d59378d72b4710e7f35389bd8c931390a4b908d0d84a1949bb",
        "r": "0x1686aacc780ad5a1805738bd87c709f3c0fbd5c8283be6f454aabefead5d5910",
        "raw": "0xf902cd8302501b843b9aca00837a1200945717adf502fd8830456bd5dc26801a4db394e6b280b902641a4813d700000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000009de76000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002097035c1f04f1a223413cbe3132300000000000000000000000000000000000062cb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002f69acd420fb6e6de34ec361ceddd000000000000000000000000000000000000a63700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000177a01686aacc780ad5a1805738bd87c709f3c0fbd5c8283be6f454aabefead5d5910a002d0e9cee44425e63560ce16768d8a52552ae4b386a957bdbf5e518b438e2641",
        "s": "0x2d0e9cee44425e63560ce16768d8a52552ae4b386a957bdbf5e518b438e2641",
        "standardV": "0x0",
        "to": "0x5717adf502fd8830456bd5dc26801a4db394e6b2",
        "transactionIndex": "0x0",
        "v": "0x77",
        "value": "0x0"
      },
      {
        "blockHash": "0x0c58244f5d538e1f5840c6751c3b3a2c9fdf9583245918b224c6aad088de6e5a",
        "blockNumber": "0x9de762",
        "chainId": null,
        "condition": null,
        "creates": null,
        "from": "0xb3683b4de1fc502807464b55d151e8e2d2c19cb5",
        "gas": "0xf4240",
        "gasPrice": "0x3b9aca00",
        "hash": "0x9535a683436191e42f5a4371c1c3fe6be07964e858f52d876d9e5c06e04233f5",
        "input": "0x28fbdf0d000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000040376634613461663166336262326163646366313062656339636463336337636639313061303030336365323739313866366565323964376436626130353964360000000000000000000000000000000000000000000000000000000000000015332c31353530303038383134393939306131362c320000000000000000000000",
        "nonce": "0x2187c",
        "publicKey": "0x829019ea9bc42bbc7a182173191216d0386cbbf98cd35d2aa0126b8ccc8f94572dad6b218539e3a1692945ab905d34151ca8d1eea5c077104725ebff15277857",
        "r": "0xdede49403450d50a2db23a0f8d776fa94a6cae81ac8d803a29c47b4e6d63e3c",
        "raw": "0xf9014c8302187c843b9aca00830f424094cdbf1d1c64faad6d8484fd3dd5be2b4ea57f5f4c80b8e428fbdf0d000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000040376634613461663166336262326163646366313062656339636463336337636639313061303030336365323739313866366565323964376436626130353964360000000000000000000000000000000000000000000000000000000000000015332c31353530303038383134393939306131362c3200000000000000000000001ba00dede49403450d50a2db23a0f8d776fa94a6cae81ac8d803a29c47b4e6d63e3ca06361f099d66bdd992a4d85c9482423a9022165b40935d5623718c82c0d897f66",
        "s": "0x6361f099d66bdd992a4d85c9482423a9022165b40935d5623718c82c0d897f66",
        "standardV": "0x0",
        "to": "0xcdbf1d1c64faad6d8484fd3dd5be2b4ea57f5f4c",
        "transactionIndex": "0x1",
        "v": "0x1b",
        "value": "0x0"
      }
    ],
    "transactionsRoot": "0x6959042602c4847d263901a7d049b5565cbd511989a7d211b319fe2a96df4ed5",
    "uncles": []
  }`

	var block eth.Block
	err := json.Unmarshal([]byte(full), &block)
	require.NoError(t, err, "kovan full parity block should deserialize")

	require.Equal(t, "0x9de762", block.Number.String())
	require.Equal(t, 2, len(block.Transactions))
	require.Equal(t, uint64(0x2276e2), block.GasUsed.UInt64())

	j, err := json.Marshal(&block)
	require.NoError(t, err)

	RequireEqualJSON(t, []byte(full), j)
}

func TestGoerliBlocks(t *testing.T) {
	geth := `{
    "difficulty": "0x2",
    "extraData": "0x00000000000000000000000000000000000000000000000000000000000000003a69a356f8082954c675f1bb634c9ef5db6f1077b498a8c0a2a17afd0e7f8c5072ef2f3548bd013ae758a13b901f3b834c713c2391a2a6844c26a6ff386177a300",
    "gasLimit": "0x7a1200",
    "gasUsed": "0x146dd",
    "hash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "miner": "0x0000000000000000000000000000000000000000",
    "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "nonce": "0x0000000000000000",
    "number": "0x12b1d",
    "parentHash": "0x68393bd212eb3dec1b97f3a7e4e84a9cb0d632309276b485dbdf5cb383ab25cf",
    "receiptsRoot": "0x1ed4e3c3370adadd3eb3712fe87bb136e035ad2071d1a820de1ee1931ab677cf",
    "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
    "size": "0x464",
    "stateRoot": "0x0a31f0562a092a79e00680cdbaf089b65d76e720c2a358901fa696a9cb5dd3d8",
    "timestamp": "0x5c64a101",
    "totalDifficulty": "0x20422",
    "transactions": [
      {
        "blockHash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
        "blockNumber": "0x12b1d",
        "from": "0x441a4060b5a1bf4ead6dd13acdcb7f83e4c374ca",
        "gas": "0x6d5f",
        "gasPrice": "0x3b9aca00",
        "hash": "0x8b142669ff0013c85898f471bc7cc01440b5c23aa3a0f2e1db8b2daa3e3b6974",
        "input": "0x9c0e3f7a0000000000000000000000000000000000000000000000068155a43676e00000000000000000000000000000000000000000000000000000000000000000002a",
        "nonce": "0x19",
        "to": "0x2d6a9044a88e8b6e175f31b71117dbb344c5892c",
        "transactionIndex": "0x0",
        "value": "0x0",
        "v": "0x1c",
        "r": "0x8b1d784d17627beb4c71269aa344ad1b49c2763f5062ec58e26dc3d1bd0e3fd3",
        "s": "0x59756df23b630a12f6e6d262b44b16c4170f35a7ac802df7419bb48045495275"
      },
      {
        "blockHash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
        "blockNumber": "0x12b1d",
        "from": "0xddff50398536a8ba7f3840581e662f1c9bd21505",
        "gas": "0x6d9f",
        "gasPrice": "0x3b9aca00",
        "hash": "0xe25fdf96c393dbd853dfb8a421b54c6bab645ac5037a3d90b679ebe7a3028d89",
        "input": "0x9c0e3f7a00000000000000000000000000000000000000000000000004d498fb9e757a68000000000000000000000000000000000000000000000000000000000000002a",
        "nonce": "0x19",
        "to": "0x4e10a95f0bb2fec6ec1c4296a16420a018a5f9fe",
        "transactionIndex": "0x1",
        "value": "0x0",
        "v": "0x1b",
        "r": "0xd12898a69e49e3c0b97e28db161b97f5411169ee7934e51eec410a2b25d6bf14",
        "s": "0x809983bda5c292d4eb5434bf82c6cd00b5c9d615dd097c8c959cf35c7d49b7a"
      },
      {
        "blockHash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
        "blockNumber": "0x12b1d",
        "from": "0x2b371c0262ceab27face32fbb5270ddc6aa01ba4",
        "gas": "0x6bdf",
        "gasPrice": "0x3b9aca00",
        "hash": "0xbddbb685774d8a3df036ed9fb920b48f876090a57e9e90ee60921e0510ef7090",
        "input": "0x9c0e3f7a0000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000002a",
        "nonce": "0x1c",
        "to": "0x8e730df7c70d33118d9e5f79ab81aed0be6f6635",
        "transactionIndex": "0x2",
        "value": "0x0",
        "v": "0x1b",
        "r": "0x2a98c51c2782f664d3ce571fef0491b48f5ebbc5845fa513192e6e6b24ecdaa1",
        "s": "0x29b8e0c67aa9c11327e16556c591dc84a7aac2f6fc57c7f93901be8ee867aebc"
      }
    ],
    "transactionsRoot": "0xa0548c58d46cc59673308c31437c9b3bd718a1f44236b208eb3bc7991ff19040",
    "uncles": []
  }`

	parity := `{
    "author": "0x0000000000000000000000000000000000000000",
    "difficulty": "0x2",
    "extraData": "0x00000000000000000000000000000000000000000000000000000000000000003a69a356f8082954c675f1bb634c9ef5db6f1077b498a8c0a2a17afd0e7f8c5072ef2f3548bd013ae758a13b901f3b834c713c2391a2a6844c26a6ff386177a300",
    "gasLimit": "0x7a1200",
    "gasUsed": "0x146dd",
    "hash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "miner": "0x0000000000000000000000000000000000000000",
    "number": "0x12b1d",
    "parentHash": "0x68393bd212eb3dec1b97f3a7e4e84a9cb0d632309276b485dbdf5cb383ab25cf",
    "receiptsRoot": "0x1ed4e3c3370adadd3eb3712fe87bb136e035ad2071d1a820de1ee1931ab677cf",
    "sealFields": [
      "0xa00000000000000000000000000000000000000000000000000000000000000000",
      "0x880000000000000000"
    ],
    "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
    "size": "0x464",
    "stateRoot": "0x0a31f0562a092a79e00680cdbaf089b65d76e720c2a358901fa696a9cb5dd3d8",
    "timestamp": "0x5c64a101",
    "totalDifficulty": "0x20422",
    "transactions": [
      {
        "blockHash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
        "blockNumber": "0x12b1d",
        "chainId": null,
        "condition": null,
        "creates": null,
        "from": "0x441a4060b5a1bf4ead6dd13acdcb7f83e4c374ca",
        "gas": "0x6d5f",
        "gasPrice": "0x3b9aca00",
        "hash": "0x8b142669ff0013c85898f471bc7cc01440b5c23aa3a0f2e1db8b2daa3e3b6974",
        "input": "0x9c0e3f7a0000000000000000000000000000000000000000000000068155a43676e00000000000000000000000000000000000000000000000000000000000000000002a",
        "nonce": "0x19",
        "publicKey": "0xc2423312402f1b4a75ef71dc1a2f43700c22c663e799e13776c81d9a18ad332504dd6668088edb02f03968025fcb25d90e164f184dc00fd43649307ee5f23309",
        "r": "0x8b1d784d17627beb4c71269aa344ad1b49c2763f5062ec58e26dc3d1bd0e3fd3",
        "raw": "0xf8a819843b9aca00826d5f942d6a9044a88e8b6e175f31b71117dbb344c5892c80b8449c0e3f7a0000000000000000000000000000000000000000000000068155a43676e00000000000000000000000000000000000000000000000000000000000000000002a1ca08b1d784d17627beb4c71269aa344ad1b49c2763f5062ec58e26dc3d1bd0e3fd3a059756df23b630a12f6e6d262b44b16c4170f35a7ac802df7419bb48045495275",
        "s": "0x59756df23b630a12f6e6d262b44b16c4170f35a7ac802df7419bb48045495275",
        "standardV": "0x1",
        "to": "0x2d6a9044a88e8b6e175f31b71117dbb344c5892c",
        "transactionIndex": "0x0",
        "v": "0x1c",
        "value": "0x0"
      },
      {
        "blockHash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
        "blockNumber": "0x12b1d",
        "chainId": null,
        "condition": null,
        "creates": null,
        "from": "0xddff50398536a8ba7f3840581e662f1c9bd21505",
        "gas": "0x6d9f",
        "gasPrice": "0x3b9aca00",
        "hash": "0xe25fdf96c393dbd853dfb8a421b54c6bab645ac5037a3d90b679ebe7a3028d89",
        "input": "0x9c0e3f7a00000000000000000000000000000000000000000000000004d498fb9e757a68000000000000000000000000000000000000000000000000000000000000002a",
        "nonce": "0x19",
        "publicKey": "0xc699e4a9b97ca35f973b2cf00760f895eb1d8b0aadbf65a3cf40ae39ad4481a50cd45bbd543dbbfba831dc55b3a16337e805e830045ff70551d4ea9f77f89efc",
        "r": "0xd12898a69e49e3c0b97e28db161b97f5411169ee7934e51eec410a2b25d6bf14",
        "raw": "0xf8a819843b9aca00826d9f944e10a95f0bb2fec6ec1c4296a16420a018a5f9fe80b8449c0e3f7a00000000000000000000000000000000000000000000000004d498fb9e757a68000000000000000000000000000000000000000000000000000000000000002a1ba0d12898a69e49e3c0b97e28db161b97f5411169ee7934e51eec410a2b25d6bf14a00809983bda5c292d4eb5434bf82c6cd00b5c9d615dd097c8c959cf35c7d49b7a",
        "s": "0x809983bda5c292d4eb5434bf82c6cd00b5c9d615dd097c8c959cf35c7d49b7a",
        "standardV": "0x0",
        "to": "0x4e10a95f0bb2fec6ec1c4296a16420a018a5f9fe",
        "transactionIndex": "0x1",
        "v": "0x1b",
        "value": "0x0"
      },
      {
        "blockHash": "0x2b27fe2bbc8ce01ac7ae8bf74f793a197cf7edbe82727588811fa9a2c4776f81",
        "blockNumber": "0x12b1d",
        "chainId": null,
        "condition": null,
        "creates": null,
        "from": "0x2b371c0262ceab27face32fbb5270ddc6aa01ba4",
        "gas": "0x6bdf",
        "gasPrice": "0x3b9aca00",
        "hash": "0xbddbb685774d8a3df036ed9fb920b48f876090a57e9e90ee60921e0510ef7090",
        "input": "0x9c0e3f7a0000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000002a",
        "nonce": "0x1c",
        "publicKey": "0xc4e6c6c19ab79c1dcc7bbd2c76f52cb110ac90ee56728e588cda4b6eb763848203ce9e3a12322a9128b0c3572f99f5786d6569946785b1d1b0b97ade516cad03",
        "r": "0x2a98c51c2782f664d3ce571fef0491b48f5ebbc5845fa513192e6e6b24ecdaa1",
        "raw": "0xf8a81c843b9aca00826bdf948e730df7c70d33118d9e5f79ab81aed0be6f663580b8449c0e3f7a0000000000000000000000000000000000000000000000000000000000000078000000000000000000000000000000000000000000000000000000000000002a1ba02a98c51c2782f664d3ce571fef0491b48f5ebbc5845fa513192e6e6b24ecdaa1a029b8e0c67aa9c11327e16556c591dc84a7aac2f6fc57c7f93901be8ee867aebc",
        "s": "0x29b8e0c67aa9c11327e16556c591dc84a7aac2f6fc57c7f93901be8ee867aebc",
        "standardV": "0x0",
        "to": "0x8e730df7c70d33118d9e5f79ab81aed0be6f6635",
        "transactionIndex": "0x2",
        "v": "0x1b",
        "value": "0x0"
      }
    ],
    "transactionsRoot": "0xa0548c58d46cc59673308c31437c9b3bd718a1f44236b208eb3bc7991ff19040",
    "uncles": []
  }`

	for i, payload := range []string{geth, parity} {
		msg := ""
		switch i {
		case 0:
			msg = "geth goerli block"
		case 1:
			msg = "parity goerli block"
		}
		var block eth.Block
		err := json.Unmarshal([]byte(payload), &block)
		require.NoError(t, err, msg)

		require.Equal(t, "0x12b1d", block.Number.String(), msg)
		require.Equal(t, 3, len(block.Transactions), msg)
		require.Equal(t, "0x59756df23b630a12f6e6d262b44b16c4170f35a7ac802df7419bb48045495275", block.Transactions[0].S.String(), msg)
		require.Equal(t, uint64(0x146dd), block.GasUsed.UInt64(), msg)

		j, err := json.Marshal(&block)
		require.NoError(t, err, msg)

		RequireEqualJSON(t, []byte(payload), j, msg)
	}
}

func TestBlockWithContractCreation(t *testing.T) {
	// One of the transactions is a smart contract creation event, so .To is nil which was previously breaking serialization
	// Keeping this as a nice regression test since I used it to debug
	full := `{"difficulty":"0x98657b1e19e81","extraData":"0x737061726b706f6f6c2d6574682d636e2d687a32","gasLimit":"0x7a121d","gasUsed":"0x4b85fa","hash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","logsBloom":"0x040000000010005000208000100000000010020002040012020244000031000022000580002052000010280005000880021000020a1100100024000444280001801410809320014300800408800000034000000440680200004000014100a3108100102c0a0104004000004004000800080002200080440004002010400000000000001000220800000210000024800000400080200000000081080401600000060880000508001080040188102080010084010080800090c00040000004450000004002002001000408800096080000000100818202c0010000002a00202028e090210010000088800000868020800000204b0002814408000000001c002004","miner":"0x5a0b54d5dc17e0aadc383d2db43b0a0d3e029c4c","mixHash":"0xde5facfa3d7a83279235a85dd63f073237cea69e4de80792909b77f5aa1aec31","nonce":"0x7d89c94c00f655f7","number":"0x6e2e24","parentHash":"0xb297aa3999efd8af14e0c4abec26c2eadcb5b6600be37379ebb5fa23e1f29cfc","receiptsRoot":"0x65e1afb1fa83a7c34736fced95fd9f6729e169dd28dda0e669b5190a99531ee6","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","size":"0x2f10","stateRoot":"0x4ec8687bacabac1dc901e0353e27ac3aaa19b28b3c7ef42c6d49268205e2dc75","timestamp":"0x5c65d52d","totalDifficulty":"0x1ee8a4fc3242c1e48fd","transactions":[{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xf5bec430576ff1b82e44ddb5a1c93f6f9d0884f3","gas":"0x28b0a","gasPrice":"0xba43b7400","hash":"0xc2dde924dfae247a8aca9714948936068ee1b7cbdfb3d41ada9420aaa27a3c96","input":"0x","nonce":"0x45b9e","r":"0x115fbe55c34b57cedb8e6dbad29278a54ecc7210a68bb57e132a88853a8d17db","s":"0x7fad33abd3ffe79a7f5e8b0462dc0b4b11b3e891da101cc4b1402294606e665c","to":"0x77fd3d4de60333dab6e8c4d41e4e239e198e0dec","transactionIndex":"0x0","v":"0x26","value":"0x24c6b0f5aec90000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x38b45c00fb52b85548f79e9dcc0faeb8dd21f75c","gas":"0x5208","gasPrice":"0x8458e7b1a","hash":"0x3743fcb677abc11df235607f48d548c0f1dd9d31b31956493915b797cf660343","input":"0x","nonce":"0x19","r":"0x9805c4f3bec955480acb29bf6ab0109ebf26fc81f62cc5c2d9b85b69b0471038","s":"0x1b239d379528aefe428171388618ad0122c04c124c501ce3ed0d80617b61995","to":"0x777f415324d56e1d54fa832902d8797db7a4c57c","transactionIndex":"0x1","v":"0x26","value":"0xddddadfb19423a0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x61b9898c9b60a159fc91ae8026563cd226b7a0c1","gas":"0xe7ef0","gasPrice":"0x37e11d600","hash":"0x8dc02eea56e0f470e94ad6fc7a3e4f916836cf7f8a39edaed7da6de1153c565c","input":"0xb7b2c7d600000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000003e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044000000000000000000000000000000000000000000000000000000000000004a00000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000200000000000000000000000090079aabc47b5bea2dfc358d7114ade57ee3920900000000000000000000000061b9898c9b60a159fc91ae8026563cd226b7a0c100000000000000000000000038ae374ecf4db50b0ff37125b591a04997106a32000000000000000000000000aa7427d8f17d87a28f5e1ba3adbb270badbe101100000000000000000000000061b9898c9b60a159fc91ae8026563cd226b7a0c100000000000000000000000090079aabc47b5bea2dfc358d7114ade57ee3920900000000000000000000000061b9898c9b60a159fc91ae8026563cd226b7a0c100000000000000000000000038ae374ecf4db50b0ff37125b591a04997106a32000000000000000000000000aa7427d8f17d87a28f5e1ba3adbb270badbe101100000000000000000000000061b9898c9b60a159fc91ae8026563cd226b7a0c100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000003c17400f0571000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005c814646889c9c727c675e965d9d74a258bf8bd5841ba3531662bdaf63475dddef838ba50000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000003c17400f0571000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005c8146461700107adc6f177c61aeeb1c1c4b10766d99792f9f1bbb377ab5fcf3cddb547100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000003c17400f057100000000000000000000000000000000000000000000000000003c17400f057100000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000271e0f154d037f27c356ac8225c86dc0ff7ff09aad2d8ab75fff3bbb1b066a5761b6ab5562e13bb2415ce0fe5f26a03f49bbe4828d55cd832ab93001fcb699c2700000000000000000000000000000000000000000000000000000000000000021ed6f8bfc487dd52ddd5c8186b0351aa42453466e063a1eac2bafb0c79be1e9b32951032708bbc3fecf7839a812ea3a8e2f5b8b07e2d1da77e293fca9656602e","nonce":"0x208b","r":"0x818585ea8d76b8c0fac462c0f46a3c4077cec2affe27f6f5e4723181e6f16177","s":"0x11af1399fc6dd1c910e4efd414387125dff4c241fcfabf940d6e58ce8395e170","to":"0xdcdb42c9a256690bd153a7b409751adfc8dd5851","transactionIndex":"0x2","v":"0x25","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x9cdab2e32775838688b1942a264760bf2e68f5ac","gas":"0x3d090","gasPrice":"0x2cb417800","hash":"0x2f27ba27022f4de9492c5cae231764ce1f0158cb950de48c541e2d8407e9cb38","input":"0xdc6dd1520000000000000000000000000000000000000000000000000000000000000032","nonce":"0x48","r":"0xf5f119af09f8896bb3966fac1daa69a1309075b2a0a1bcdb45bb491c9bf45806","s":"0x5e2253913fcd7a9d2a1f00b18e3fe9ffd266383b9e30dd2ca0301e76a30b7b9f","to":"0xa52e014b3f5cc48287c2d483a3e026c32cc76e6d","transactionIndex":"0x3","v":"0x25","value":"0x6f05b59d3b20000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x2b728ac094d22c9ddab8f605dfea2421b7421d4b","gas":"0x5208","gasPrice":"0x280eda262","hash":"0xb2e1c60b9795be639aef0cbc05a976a6dc34227761b5905677c0be0de679ded3","input":"0x","nonce":"0x1b","r":"0xbaec50d4838480c8a0d71bf71222b5a4fc846eb371c279a857602b4c0d94d66","s":"0x74ce326e0e3398aaf7dd705abe94592a1697c974d45bdef23f4f7d10e6e19519","to":"0x9e0eb37c926adf6023bca0223dcab564a009b450","transactionIndex":"0x4","v":"0x26","value":"0x463eb310c768f0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x6d27d82d7d6f0ae00ba6cdfe53aa9d0097952222","gas":"0x19f0a0","gasPrice":"0x218711a00","hash":"0x09dfc3ad5a9b33c1d49096a4762de2e09fbb5df4e19347a0b8703b22cde7b648","input":"0x52748cfe00000000000000000000000050aebcddfdf573492e795186ca00e9a47f41c8a00000000000000000000000000518d52e6d6662e3a1d5aec6e233e50e6a52380600000000000000000000000060f36e8863d93440ec6c584567cbea3ce76d023200000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000406531646134366338316638656636356332616434616366306533663632613535343232326633303936336565663231363837346334643738623838616161616300000000000000000000000000000000000000000000000000000000000000415671835bb7e14ad8a961e2939304036ab27448a800080722cc942231e0d369241e80eb7f3a7e0926c6b2d10d94f5e89411ebf3a51f92e6fb51a40a4d9413631d1c00000000000000000000000000000000000000000000000000000000000000","nonce":"0x13f53","r":"0xb63fa9edfc07e19f759a959bf3326331aa56b1c8c0010372128491eff9783303","s":"0x4aace8b7adceb59a2ef4445ce48240713b182109f73cf5916fac9f7315c56c9e","to":"0xd077c09a7e65c4cca490a776d5e395fb4fe7179a","transactionIndex":"0x5","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x6b59210ade46b62b25e82e95ab390a7ccadd4c3a","gas":"0x2dc6c0","gasPrice":"0x1dcd65000","hash":"0xa6c1da26576bc41a722a3058bb1fa36e9c58188bd960bc1f40a976b6cb25e15e","input":"0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600160146101000a81548160ff0219169083151502179055506000600160156101000a81548160ff021916908315150217905550611193806100d76000396000f3006080604052600436106100ba576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680636ea056a9146100dd5780638da5cb5b146101425780638fc1038e1461019957806397dc97cb146101fe578063b9b8af0b14610255578063c1756a2c14610284578063c18cfe86146102dc578063ce46e04614610337578063d996c57a14610366578063dcc279c814610395578063ed6fc1bc146103c4578063f2fde38b14610407575b60001515600160159054906101000a900460ff16151514156100db57600080fd5b005b3480156100e957600080fd5b50610128600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061044a565b604051808215151515815260200191505060405180910390f35b34801561014e57600080fd5b50610157610712565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156101a557600080fd5b506101e4600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610737565b604051808215151515815260200191505060405180910390f35b34801561020a57600080fd5b50610213610a33565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561026157600080fd5b5061026a610a59565b604051808215151515815260200191505060405180910390f35b6102c2600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610a6c565b604051808215151515815260200191505060405180910390f35b3480156102e857600080fd5b5061031d600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610b7f565b604051808215151515815260200191505060405180910390f35b34801561034357600080fd5b5061034c610e34565b604051808215151515815260200191505060405180910390f35b34801561037257600080fd5b50610393600480360381019080803515159060200190929190505050610e47565b005b3480156103a157600080fd5b506103c2600480360381019080803515159060200190929190505050610ebf565b005b3480156103d057600080fd5b50610405600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610f37565b005b34801561041357600080fd5b50610448600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611012565b005b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806104f75750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b151561050257600080fd5b60009150600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1614158015610556575060001515600160149054906101000a900460ff161515145b151561056157600080fd5b849050838173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561060057600080fd5b505af1158015610614573d6000803e3d6000fd5b505050506040513d602081101561062a57600080fd5b8101908080519060200190929190505050101561064a576000925061070a565b8073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33866040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b1580156106ed57600080fd5b505af1158015610701573d6000803e3d6000fd5b50505050600192505b505092915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806107e45750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156107ef57600080fd5b60009150600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1614158015610843575060001515600160149054906101000a900460ff161515145b151561084e57600080fd5b849050838173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1580156108ed57600080fd5b505af1158015610901573d6000803e3d6000fd5b505050506040513d602081101561091757600080fd5b810190808051906020019092919050505010156109375760009250610a2b565b8073ffffffffffffffffffffffffffffffffffffffff166323b872dd3033876040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b158015610a0e57600080fd5b505af1158015610a22573d6000803e3d6000fd5b50505050600192505b505092915050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160149054906101000a900460ff1681565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610b165750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610b2157600080fd5b60001515600160159054906101000a900460ff1615151415610b4257600080fd5b8273ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050905092915050565b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610c2c5750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610c3757600080fd5b60009150600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614158015610c8b575060001515600160149054906101000a900460ff161515145b1515610c9657600080fd5b8390508073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb338373ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610d5157600080fd5b505af1158015610d65573d6000803e3d6000fd5b505050506040513d6020811015610d7b57600080fd5b81019080805190602001909291905050506040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050600060405180830381600087803b158015610e1157600080fd5b505af1158015610e25573d6000803e3d6000fd5b50505050600192505050919050565b600160159054906101000a900460ff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610ea257600080fd5b80600160156101000a81548160ff02191690831515021790555050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610f1a57600080fd5b80600160146101000a81548160ff02191690831515021790555050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610f9257600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610fce57600080fd5b80600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561106d57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156110a957600080fd5b8073ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a3806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505600a165627a7a72305820bde856abe6819d4a475671ad534de55797d60abb945f5ea2ee037d554d02cf270029","nonce":"0x5f1f","r":"0xbe9872010301ebd71ea659b54b5d8b9f117249c9a5c23ef65de21c7807c7ddc8","s":"0x883971fb706e2336928a21be320c98c457238c2ef3466ba437f2f0bbfe32ad7","to":null,"transactionIndex":"0x6","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x7073d47fbf62d3287c6124fecbb44d19020aeb29","gas":"0xaf7a","gasPrice":"0x1dcd65000","hash":"0xc314468410e51f5d535c37a56e59a77445347d830f5e455fb12508b28afb83b3","input":"0x2e1a7d4d000000000000000000000000000000000000000000000000001772aa3f848000","nonce":"0x14b","r":"0x2d3a07f138e2833ede861dfc0f83a9146aac234f9c988a681fa6945064ca67ba","s":"0x355f047f7b03cc6b4d05ed5811a6f71f6ef56501318de8c40d50909885ad5bbb","to":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","transactionIndex":"0x7","v":"0x25","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x24f962c982481b509d0dce48f4ba209c2c50380b","gas":"0xa410","gasPrice":"0x1bf08eb00","hash":"0xf3a2ed53a12a0cffc48809d0af4c3acc7efe49afd40209a7cf48df25007f02b0","input":"0x0000000000000000000000000000000000000000","nonce":"0x1f","r":"0x984d86e03b54ab7781ff8901f81a10f208ccd43c0336acdd556002a5d89327bf","s":"0x4ea7ce089e8bc0b66072657332628184b1770f9c5829631d74d5489cebe25d0a","to":"0xd7b9a9b2f665849c4071ad5af77d8c76aa30fb32","transactionIndex":"0x8","v":"0x25","value":"0x42dcca532f0c00"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x8756710735059e534c653b4125efebe54bb39618","gas":"0x186a0","gasPrice":"0x1a13b8600","hash":"0x0d94b5db670fbd4b600bea45b823dffde8a5ab83a33b5f8f8bb8d871baf7742c","input":"0xa9059cbb0000000000000000000000000eae36611a545c81d3b0a365fb05e059911667180000000000000000000000000000000000000000000000056bc75e2d63100000","nonce":"0x325","r":"0xdbd3b6a80b64460a9a7aa971b82810559adb4ef686b312f389656fa428d6506","s":"0x4f5333b9a234bcb89dd08a93ee4b6dc7328ff4e168ea4df70ce96dea0ae5be8a","to":"0x1f2910b0d423bbc4271af083b17fb2837f215c36","transactionIndex":"0x9","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xcdd37ada79f589c15bd4f8fd2083dc88e34a2af2","gas":"0x5208","gasPrice":"0x174876e80","hash":"0x711d3d61f22c6185eba2942f3ae93bfbdd50143a44332ab39e23f1964d7f5828","input":"0x","nonce":"0x368","r":"0x776c293ccc5608a205415e4ca976e644b577b9c3d3974f2a74f1afd909a7b9a1","s":"0x6d49adc3987e70566c166ee17e610df05c7b1e348d0f55ff7b2c64452a329317","to":"0xcdd37ada79f589c15bd4f8fd2083dc88e34a2af2","transactionIndex":"0xa","v":"0x1c","value":"0x1ff973cafa8000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xc601422e4cdf5039a95c6815f8a1d9e0a6b6c2d2","gas":"0x5208","gasPrice":"0x12a05f200","hash":"0x303dd7ab7a8f2a2a3c8d0a731265ee94b2763aeed3fa3ce66bd32ad69fcff64c","input":"0x","nonce":"0x394","r":"0xba2f016543f72bf5e0e22055063a8b30931283bb6d12a6dfae0d61e27474c604","s":"0x11e224449f47f0d189e7b44428e4c7a3fd09bddcd00820d5ddab72b2f2fa82a6","to":"0x67b0a46e700c089894a3d3b2c036ed14735c72dc","transactionIndex":"0xb","v":"0x25","value":"0x53444835ec580000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xf5572bbecc8888be7eac5b9bbadd80c17b4abe12","gas":"0x5208","gasPrice":"0x12a05f200","hash":"0x6e885911ecc79eb1f4915e665d23b69b7ef3cbdde6968acad02d4adc179a4c43","input":"0x","nonce":"0x11","r":"0xbda6931f840abcacdeea9dc45508b80baf916ad5f583c156aef3ddf880bfc2c5","s":"0x468809c216df70fb23b7aa19f5ba978a3340f6fef1e7f94e817feef1558a8fa","to":"0xf908294fdbff1a7d975cddace16dc2e9eac8f2cd","transactionIndex":"0xc","v":"0x26","value":"0x9296e92217f019"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x59aa0e99cbe397dd5f2eb4013de9094f804a4f37","gas":"0x15f90","gasPrice":"0x12a05f200","hash":"0x22460bdcf77125d7d69e53397ca7118b2d769529aef0208c23b3275047701bb4","input":"0xa9059cbb00000000000000000000000052d2c84a48b5e37e3a873223720295cdfe5804cb0000000000000000000000000000000000000000000000000c7d713b49da0000","nonce":"0x16d4","r":"0x9173404e1f9b44c13f1d6e3cf6c4c47f55df783fc2eb5319b3002ae055e6387a","s":"0x708100801f37d3079581ead489a6fc85c785cfdd4cd4281568d143f6650c19dd","to":"0xc87f95aa269dd300d9f1ce49d8e1fd8119a10456","transactionIndex":"0xd","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x59aa0e99cbe397dd5f2eb4013de9094f804a4f37","gas":"0x15f90","gasPrice":"0x12a05f200","hash":"0xfd3c382f0b6728f69f0134af902eeebe3b9b3aab91a548e6312dee6d67b22d33","input":"0xa9059cbb00000000000000000000000068392251d1dab1665d8a2700ca4e3b53e2f78b31000000000000000000000000000000000000000000000000221c7bcb5c9fc400","nonce":"0x16d5","r":"0x4b917c694d867058d167d67124de089d852aa33f2d25abb53c3f2db3802f6fe4","s":"0x1a942d6c4d0fa3731011e098b82c6157f2869e7b5863db49c63cbdaa7daec3c2","to":"0xc87f95aa269dd300d9f1ce49d8e1fd8119a10456","transactionIndex":"0xe","v":"0x25","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x59aa0e99cbe397dd5f2eb4013de9094f804a4f37","gas":"0x15f90","gasPrice":"0x12a05f200","hash":"0xf48baf83bb94522d78699eb7dcbbbb9259f8983b493e747089dcea5b0ee0f029","input":"0xa9059cbb00000000000000000000000003153cdd388ed9cac78c185b56a9477bad02146a0000000000000000000000000000000000000000000000000de0b6b3a7640000","nonce":"0x16d6","r":"0xced3877faf1f8487317b5c8f2681589facbcfa81cecf0ffa3ebf0f90a37fb0d1","s":"0x2225d05863a10dd0b6591067b57bb88efadcfe20ff829c34d6297a414b5f565d","to":"0xc87f95aa269dd300d9f1ce49d8e1fd8119a10456","transactionIndex":"0xf","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x59aa0e99cbe397dd5f2eb4013de9094f804a4f37","gas":"0x15f90","gasPrice":"0x12a05f200","hash":"0x327fed95bda7798b006ff36bf48a829f3e54b3e21b087419be50e478952f8b3e","input":"0xa9059cbb000000000000000000000000f3a71cc1be5ce833c471e3f25aa391f9cd56e1aa0000000000000000000000000000000000000000000000004101a7cdd96d9c00","nonce":"0x16d7","r":"0xcf14b9a927ad95f5abde89f703fc6e7b15a03a67df5f94757fab29ad3c5fd02c","s":"0x78d6b8e600c8cf6cef9153faaa82e42093c385e22a9b8f19fa7c958b7642cc1f","to":"0xb8c77482e45f1f44de1745f52c74426c631bdd52","transactionIndex":"0x10","v":"0x25","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x7babf9c1f9f9e9a3a518040d1b6cd6d026f3ac81","gas":"0x5208","gasPrice":"0x12a05f200","hash":"0xa81ce42edbfeb721cac823b50bc41ff087fc25833e1de80c7f8f1a445cd01cf1","input":"0x","nonce":"0x3b","r":"0x1bea01b149f04dd2916936b0eb5f96f2278bc5ac26ec3642da2f605ee35b3f23","s":"0x2572dce2f538ea5b2aec217d840371ba4db76cf6d71aecce1010703ea32e871b","to":"0x549e70f51538473fb193462bfbce60d8a73965d6","transactionIndex":"0x11","v":"0x26","value":"0x3d957d8a1da8000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x50e632a5279431ee92eed3c61647f165a6c15f49","gas":"0x38766","gasPrice":"0x12a05f200","hash":"0x86cbae527baec8d225331ca06d74bce482e7d4e9ff144809e5ebc57cc2f0a360","input":"0xed60ade600000000000000000000000000000000000000000000000000000000001530b000000000000000000000000000000000000000000000000000000000001541b8","nonce":"0x466","r":"0xf77e0909389fa0e87b24fc2e4bf67b9e9fbe66b06337132a719bd46b9734983f","s":"0xf6f9188f132e4624aa7bb29ec088f76a9dfffe1138492c3cd906f2e0ddf9c08","to":"0x06012c8cf97bead5deae237070f9587f8e7a266d","transactionIndex":"0x12","v":"0x26","value":"0x3fdc2ad1d67000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x5341ae85a5d67fa32d25b26ed4ef5427f4644d8f","gas":"0x339c4","gasPrice":"0x12a05f200","hash":"0x065be1bafa62aa80e31831ca64548b32e0a0319e15b04f932e345b7f0043c989","input":"0x90f2695c","nonce":"0x4e52","r":"0x735f0015b5c82e073542b1c837ee3db7ffea6598c55a6b9c0d6029309ac1f545","s":"0x468bb0102d17a37a84adb6a402ea146b11600a3a6fc6e10fec4a88d72e6b8c11","to":"0xd02c52f828a35b808ce8335e7f02805dcc380b35","transactionIndex":"0x13","v":"0x1b","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xb50f22bbfa23fbb730e601f1a866495bff588ca3","gas":"0x339c4","gasPrice":"0x12a05f200","hash":"0x66d409f8fcf207737b2bbcb2a1a50af29b6d40f637d605640667e610504b72e6","input":"0x90f2695c","nonce":"0x7ef8","r":"0x288be9c216100c0b3877e45099efa342bc1a08fd8ffc87aa7f68e32b7769647c","s":"0x36d730ed0003e80aaa4826c16197f1d1b8577b2847e576b63061988ee878cddf","to":"0xd02c52f828a35b808ce8335e7f02805dcc380b35","transactionIndex":"0x14","v":"0x1c","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x7d4d08b0109ca611ccc40e08cd7e8e19f276b0cd","gas":"0xf4240","gasPrice":"0x12a05f200","hash":"0x8889e11b790b40e416b09585b9c8e4ba2933fa905c4e63b046ddbf0e8bb54778","input":"0xd96a094a00000000000000000000000000000000000000000000000000071afd498d0000","nonce":"0x42f","r":"0x98a55d9c18690f748e1c49767486bec68504a749c9d7bb86bccb085311e3dabc","s":"0x6beecbc072036e6cecf1f8b1eba413a79224768291ba43790b67f99da63591e4","to":"0x105631c6cddba84d12fa916f0045b1f97ec9c268","transactionIndex":"0x15","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xbd6303c2b6f83b0acb29d7a38389a82a3d274eb0","gas":"0x5208","gasPrice":"0x12a05f200","hash":"0xeec43f4b60e5d319b3e8aecc640be74c9b6aae8326c42fabede53b34dc6026c8","input":"0x","nonce":"0x0","r":"0xc47928caf33860b70cf20a8bbd478eec4f356c4da5f59cbc85324c2c6134f43f","s":"0x2204e6fb4fa87881cdbe0ff51c87bd98d5fd44fdb0a12815f7913a5f85b154d1","to":"0xf57f8a463596814978131f24a1a486ad053dfbb0","transactionIndex":"0x16","v":"0x25","value":"0x61b31ab352c0000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x00004242712d0fa9e44533f7c836b2024bcb69ab","gas":"0x493e0","gasPrice":"0x12a05f200","hash":"0xc2710cdeb5876af6b846e8da3c3677147b36b60c7c827d0f6d8a804418f15a53","input":"0x38bbfa50e323ef2f7022703f6e80a7890e82f37f4d4c5dd51bb4e2155e871d9bac88b8d5000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000004ecd90fb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c14c50010498c36fc999f7a37ffffe7e4207142d9f708b96f190cfaed75133dba388ac694c2f6db039f926344c918a1d96142a95c332a5403b21e94953a9c75bc27d4290a33044022003bd07a86cb31b9beabbeefa55f9343fdff77afd840da1a43a714948c32e70d1022004f86513ff6689c5553599ccc60da62e063411e484e250545f844a0ba3d1e57ffd94fa71bc0ba10d39d464d0d8f465efeef0a2764e3887fcc9df41ded20f505c39dfd596b1362b033a3cf975783bac8cd4100db3d597e9208d5c16d3ff6b7d12000000000000000004778e96cc662255172ce9e1bd87642fadc070975326e697cbe1bc5742f92101163045022100bd10492ba6e3260f456adf1d5b2cf384885476593452824c011ea1da17c5064502203fd2c97c09e6a899dfb8f66979cfc157970b9cdd6abd8b4c129c167e24179c1004745d645715d370fdcaf3bdd2ecdbd8efbcfb51e033dea17f3296ab066b524c0b958d8293c0113d0753bb964cd4eaaf38b88dbeac0ffc3059b4ea3ffd36a32c80304402204ffef06ddce859270a7aba0b98309edb183259e2908994e31dcad4a6cafa656f02205bcf755e694bf1eca97ad9b48ccf61f92687a23f4d386ce3a24c25a8a818bc2500000000000000000000000000000000000000000000000000000000000000","nonce":"0x2b4","r":"0xb7b64aa3734a00ee66a9ddecfa8aa2f4d70fb947b27570da747164e7d8116e7d","s":"0xbd6e2dfb5ea1668a2a2002fd6ff68502f2fd17d707ec629da85d4094b48e367","to":"0x7409a88f44ac96cfae981f444d377b025002906a","transactionIndex":"0x17","v":"0x1b","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xc7f96c8627b906ca2ba16209f461f7ec17a3b5d9","gas":"0x101d4","gasPrice":"0xee6b2800","hash":"0xf2e97cb9bdc09ebb88cdbee6570d79a64d74c16c1275ea35686448bf94a830bd","input":"0x095ea7b30000000000000000000000008d12a197cb00d4747a1fe03395095ce2a5cc681900000000000000000000000000000000000000000000000d8d726b7177a80000","nonce":"0x11c","r":"0x88fa8335ee10a307f0fd3daf68b8c1b2b5dac55a9c2d2f6e6d5e0ec8a8983fc4","s":"0x51531a8d4aa4000eab496c1a66828362c6bee7dadcc5c763bf1acf86883cbe93","to":"0x9165b1ed40c097073a7d15ad3ef49e3c5b132588","transactionIndex":"0x18","v":"0x25","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x870eac2766e2b051d739fc4b258069e0fb6372ed","gas":"0x186a0","gasPrice":"0xb2d05e00","hash":"0xc7a6e4164565a83043d7bf6d2ea4875efc13915a7eafe35a809ea0a2e80af6b8","input":"0xb8a533130000000000000000000000003674b37078db3c35721f5d1d4349a583eabea5390000000000000000000000004660613f3e5e84970ad0f4ad498389ecea2e1233000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000f7c575cea6814af2b467dfb6253e167f0000000000000000000000000000000000000000000000000000000000000000","nonce":"0x3ceb","r":"0xf201eceeb09e8ed8a2a77893c85d86d22f95f770b90393ec114b484f370c286e","s":"0x5fa87687f0d77d68253d02477f360d922bee333e758b0c5036089b45b81f571b","to":"0xa3db33ccfe990fdf89ff311754391b5c3af4ef04","transactionIndex":"0x19","v":"0x1c","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xe89510442c05d7e4f82d22f6248fff01f1d0c1ee","gas":"0x349d73","gasPrice":"0x77359400","hash":"0x9dd916abecab800cc939d4410e4cf605968b818abad02afc657d37636abf00a4","input":"0x554de08c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000004451b91917cd2dc51ad0bab5b3560f269de7bdaa000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000002d79883d2000000000000000000000000000000000000000000000000000000000000000251c0000000000000000000000000000000000000000000000000000000000000000eb575e95e67633576578f963488161e1f7df10ce4ff5302c7836535a92883c92c5ff56850d6f389874841f0674110ea641e30a2a066493d00d16c85548c8a3fb0000000000000000000000000000000000000000000000000000000000000003","nonce":"0xda","r":"0x9e2c9cb16467909307f8ab71a9afdc3ac26698a27a102ec86137589d418f2e5d","s":"0x42809252ff3801653d94f7da67b3e6b90d76cacc81f608267890371c62103d72","to":"0x24e2b1d415e6e0d04042eaa45dc2a08fc33ca6cd","transactionIndex":"0x1a","v":"0x26","value":"0x69789fbbc4f8000"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0xe89510442c05d7e4f82d22f6248fff01f1d0c1ee","gas":"0x72697","gasPrice":"0x77359400","hash":"0x2e3b08fb4aab4c57eba566843473549331ec194de4914b79e31a8eba5f4e0377","input":"0x7489ec230329d797522f5f2e6771045b0b3cf9dada6f5201e18fb8838e02e4183993a8ba","nonce":"0xdb","r":"0x8ae227b57584b0f2060bac2ad9c30bcd2432001b77c33cfaaf21cd7b662dc34e","s":"0x23ae337edef42996f130ceac076c1c173c7eaaa4a308b0d9af5fc74388a68a41","to":"0x3448209268e97652bb67ea12777d4dfba81e3aaf","transactionIndex":"0x1b","v":"0x26","value":"0x0"},{"blockHash":"0x774c34a19ff36b1d3669c54fe385502ad32862ed728da53b72b771f82c08b474","blockNumber":"0x6e2e24","from":"0x84e835cb879f20c9051b99a9903ad7ecef65f317","gas":"0x152cc3","gasPrice":"0x77359400","hash":"0x8a27dcabe769af811668c1ceb79926c9ba0d399f6da9da71cb69f5d2b750a27d","input":"0x5bc20b240000000000000000000000000000000000000000000000000000000000003a94000000000000000000000000000000000000000000000000000000000000000c","nonce":"0x7d","r":"0xef93004c0f8f426841065ee76a712175e886b2dc19c988a0a759e3133b3b6c87","s":"0x22b1623bbffb5290f7b97b47047bab9b8b67a7714413f219eba2615bcfe47fa9","to":"0x3401cab9bee49bcb76e13a8a09619e53d45c0af0","transactionIndex":"0x1c","v":"0x25","value":"0x0"}],"transactionsRoot":"0x1f11eec059a1be005f4d0122d1c8afb9ce3fe2b6bdc4f0e94bc3edba5884e3b9","uncles":[]}`

	var block eth.Block
	err := json.Unmarshal([]byte(full), &block)
	require.NoError(t, err)

	require.Equal(t, "0x6e2e24", block.Number.String())
	require.Equal(t, 29, len(block.Transactions))
	require.Equal(t, *eth.MustAddress("0xf5bec430576ff1b82e44ddb5a1c93f6f9d0884f3"), block.Transactions[0].From)
	require.Equal(t, uint64(0x4b85fa), block.GasUsed.UInt64())

	j, err := json.Marshal(&block)
	require.NoError(t, err)

	RequireEqualJSON(t, []byte(full), j)
}
